此仓库设计要求：

脱离buildroot也能正常开发调试

## linux开发流程

### x86_64

```bash
make weichao_x86_64_defconfig
```

如果要，写到 `arch/x86/configs/weichao_x86_64_defconfig`

### orangepi zero3

```bash
make ARCH=arm64 linux_sunxi64_defconfig
make ARCH=arm64 -j$(nproc)
```

**不要少了`ARCH=xx`，否则make编译会重新弹propmt**

> https://stackoverflow.com/questions/50405217/make-kernel-prompting-for-config-options-even-when-config-is-present

在x86机器上编译arm架构的kernel需要配置交叉编译环境，否则编译会失败

用buildroot编译会自动构建arm的编译器套件

### x86保存.config


```bash
make savedefconfig
cp defconfig arch/x86/configs/weichao_x86_64_defconfig
```

调试

```bash
qemu-system-x86_64 --kernel ./arch/x86/boot/bzImage -initrd ./rootfs.cpio -device e1000,netdev=eth0 -netdev user,id=eth0,hostfwd=tcp::5555-:22,net=192.168.76.0/24,dhcpstart=192.168.76.9  -append "nokaslr console=ttyS0" -S -nographic -gdb tcp::1234 -virtfs local,path=/,security_model=none,mount_tag=guestroot
```