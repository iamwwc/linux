{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "stop qemu",
            "type": "shell",
            "command": "pkill qemu-system-x86_64 -f",
            "problemMatcher": [],
            // https://stackoverflow.com/questions/47946868/how-to-get-rid-of-terminal-will-be-reused-by-tasks-press-any-key-to-close-it
            // 自动关闭task
            // 不显示 Terminal will be reused by tasks, press any key to close it
            "presentation": {
                "reveal": "silent",
                "revealProblems": "onProblem",
                "close": true
            }
        },
        {
            "label": "start qemu",
            "type": "process",
            "isBackground": true,
            "command": "qemu-system-x86_64",
            // https://stackoverflow.com/questions/47946868/how-to-get-rid-of-terminal-will-be-reused-by-tasks-press-any-key-to-close-it
            // 自动关闭task
            // 不显示 Terminal will be reused by tasks, press any key to close it
            "presentation": {
                "reveal": "silent",
                "revealProblems": "onProblem",
                "close": true
            },
            "args": [
                "--kernel",
                "./arch/x86_64/boot/bzImage",
                "-initrd",
                "${workspaceFolder}/rootfs.cpio",
                "-device",
                "e1000,netdev=eth0",
                "-netdev",
                "user,id=eth0,hostfwd=tcp::5555-:22,net=192.168.76.0/24,dhcpstart=192.168.76.9",
                "-append",
                "nokaslr console=ttyS0",
                "-S",
                "-nographic",
                "-gdb",
                "tcp::1234",
                "-virtfs",
                "local,path=/,security_model=none,mount_tag=guestroot"
                // 调试 mt7921 驱动
                // "-usb",
                // "-device",
                // "usb-host,vendorid=0x0e8d,productid=0x7961"
            ]
        }
    ]
}
